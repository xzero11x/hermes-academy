---
import Layout from '../layouts/Layout.astro';
---

<Layout title='Iniciar Sesión - Hermes Academy'>
  <main class='auth-main'>
    <div class='auth-container'>
      <div class='auth-card'>
        <!-- Header -->
        <div class='auth-header'>
          <h1 class='welcome-text'>Welcome to</h1>
          <h2 class='brand-text'>Hermes Academy</h2>
        </div>

        <!-- Social Login Buttons -->
        <div class='social-buttons'>
          <button type='button' class='social-btn google-btn' onclick='loginWithGoogle()'>
            <svg width='20' height='20' viewBox='0 0 20 20' fill='none'>
              <path
                d='M19.9895 10.1871C19.9895 9.36767 19.9214 8.76973 19.7742 8.14966H10.1992V11.848H15.8195C15.7062 12.7671 15.0943 14.1512 13.7346 15.0813L13.7155 15.2051L16.7429 17.4969L16.9527 17.5174C18.879 15.7789 19.9895 13.221 19.9895 10.1871Z'
                fill='#4285F4'
              >
              </path>
              <path
                d='M10.1993 19.9313C12.9527 19.9313 15.2643 19.0454 16.9527 17.5174L13.7346 15.0813C12.8734 15.6682 11.7176 16.0779 10.1993 16.0779C7.50243 16.0779 5.21946 14.3395 4.40014 11.9366L4.27989 11.9465L1.13592 14.3273L1.08887 14.4391C2.76443 17.6945 6.21831 19.9313 10.1993 19.9313Z'
                fill='#34A853'
              >
              </path>
              <path
                d='M4.39899 11.9366C4.1758 11.3165 4.04811 10.6521 4.04811 9.96562C4.04811 9.27905 4.1758 8.61478 4.38668 7.99466L4.38183 7.8626L1.19534 5.44366L1.08766 5.49214C0.397214 6.84305 0.000976562 8.36304 0.000976562 9.96562C0.000976562 11.5682 0.397214 13.0881 1.08766 14.4391L4.39899 11.9366Z'
                fill='#FBBC05'
              >
              </path>
              <path
                d='M10.1993 3.85336C11.8883 3.85336 13.0894 4.66168 13.7589 5.33718L16.6175 2.59107C15.2555 1.38419 12.9527 0.0687256 10.1993 0.0687256C6.21831 0.0687256 2.76443 2.30545 1.08887 5.49214L4.38668 7.99466C5.21946 5.59183 7.50243 3.85336 10.1993 3.85336Z'
                fill='#EB4335'
              >
              </path>
            </svg>
            Login with Google
          </button>

          <button type='button' class='social-btn github-btn' onclick='loginWithGithub()'>
            <svg width='20' height='20' viewBox='0 0 20 20' fill='none'>
              <path
                d='M10 0C4.475 0 0 4.475 0 10C0 14.425 2.8625 18.1625 6.8375 19.4875C7.3375 19.575 7.525 19.275 7.525 19.0125C7.525 18.775 7.5125 17.9875 7.5125 17.15C5 17.6125 4.35 16.5375 4.15 15.975C4.0375 15.6875 3.55 14.8 3.125 14.5625C2.775 14.375 2.275 13.9125 3.1125 13.9C3.9 13.8875 4.4625 14.625 4.65 14.925C5.55 16.4375 6.9875 16.0125 7.5625 15.75C7.65 15.1 7.9125 14.6625 8.2 14.4125C5.975 14.1625 3.65 13.3 3.65 9.475C3.65 8.3875 4.0375 7.4875 4.675 6.7875C4.575 6.5375 4.225 5.5125 4.775 4.1375C4.775 4.1375 5.6125 3.875 7.525 5.1625C8.325 4.9375 9.175 4.825 10.025 4.825C10.875 4.825 11.725 4.9375 12.525 5.1625C14.4375 3.8625 15.275 4.1375 15.275 4.1375C15.825 5.5125 15.475 6.5375 15.375 6.7875C16.0125 7.4875 16.4 8.375 16.4 9.475C16.4 13.3125 14.0625 14.1625 11.8375 14.4125C12.2 14.725 12.5125 15.325 12.5125 16.2625C12.5125 17.6 12.5 18.675 12.5 19.0125C12.5 19.275 12.6875 19.5875 13.1875 19.4875C17.1375 18.1625 20 14.4125 20 10C20 4.475 15.525 0 10 0Z'
                fill='currentColor'
              >
              </path>
            </svg>
            Login with Github
          </button>
        </div>

        <!-- Divider -->
        <div class='divider'>
          <span>OR</span>
        </div>

        <!-- Login Form -->
        <form class='login-form' onsubmit='handleLogin(event)'>
          <div class='input-group'>
            <div class='input-wrapper'>
              <svg class='input-icon' width='20' height='20' viewBox='0 0 20 20' fill='none'>
                <path
                  d='M3.33333 3.33333H16.6667C17.5833 3.33333 18.3333 4.08333 18.3333 5V15C18.3333 15.9167 17.5833 16.6667 16.6667 16.6667H3.33333C2.41667 16.6667 1.66667 15.9167 1.66667 15V5C1.66667 4.08333 2.41667 3.33333 3.33333 3.33333ZM16.6667 5L10 10.8333L3.33333 5H16.6667Z'
                  fill='currentColor'
                >
                </path>
              </svg>
              <input
                type='email'
                placeholder='example@gmail.com'
                value='juan@gmail.com'
                class='form-input'
                id='email'
                required
              />
            </div>
          </div>

          <div class='input-group'>
            <div class='input-wrapper'>
              <svg class='input-icon' width='20' height='20' viewBox='0 0 20 20' fill='none'>
                <path
                  d='M15.8333 9.16667H15V6.66667C15 3.905 12.7617 1.66667 10 1.66667C7.23833 1.66667 5 3.905 5 6.66667V9.16667H4.16667C3.24167 9.16667 2.5 9.90833 2.5 10.8333V16.6667C2.5 17.5917 3.24167 18.3333 4.16667 18.3333H15.8333C16.7583 18.3333 17.5 17.5917 17.5 16.6667V10.8333C17.5 9.90833 16.7583 9.16667 15.8333 9.16667ZM6.66667 6.66667C6.66667 4.825 8.15833 3.33333 10 3.33333C11.8417 3.33333 13.3333 4.825 13.3333 6.66667V9.16667H6.66667V6.66667Z'
                  fill='currentColor'
                >
                </path>
              </svg>
              <input
                type='password'
                placeholder='••••••••••'
                value='juan12345'
                class='form-input'
                id='password'
                required
              />
              <button type='button' class='toggle-password' onclick='togglePassword()'>
                <svg width='20' height='20' viewBox='0 0 20 20' fill='none'>
                  <path
                    d='M10 12.5C11.3807 12.5 12.5 11.3807 12.5 10C12.5 8.61929 11.3807 7.5 10 7.5C8.61929 7.5 7.5 8.61929 7.5 10C7.5 11.3807 8.61929 12.5 10 12.5Z'
                    fill='currentColor'
                  >
                  </path>
                  <path
                    d='M10 4.16667C5.83333 4.16667 2.275 6.69167 0.833333 10.4167C2.275 14.1417 5.83333 16.6667 10 16.6667C14.1667 16.6667 17.725 14.1417 19.1667 10.4167C17.725 6.69167 14.1667 4.16667 10 4.16667ZM10 14.1667C7.70833 14.1667 5.83333 12.2917 5.83333 10C5.83333 7.70833 7.70833 5.83333 10 5.83333C12.2917 5.83333 14.1667 7.70833 14.1667 10C14.1667 12.2917 12.2917 14.1667 10 14.1667Z'
                    fill='currentColor'
                  >
                  </path>
                </svg>
              </button>
            </div>
          </div>

          <div class='form-options'>
            <label class='checkbox-label'>
              <input type='checkbox' id='remember' />
              <span class='checkmark'></span>
              Remember me
            </label>
            <a href='#' class='forgot-link'>Forgot Password?</a>
          </div>

          <button type='submit' class='login-btn'>Login</button>
        </form>

        <!-- Register Link -->
        <div class='register-link'>
          Don't have an account? <a href='#' onclick='showRegister()'>Register</a>
        </div>
      </div>
    </div>
  </main>
</Layout>

<script define:vars={{ baseUrl: import.meta.env.BASE_URL }}>
  // Funciones de autenticación simulada
  function loginWithGoogle() {
    alert('Login with Google simulation');
    localStorage.setItem('isLoggedIn', 'true');
    localStorage.setItem('userEmail', 'google-user@gmail.com');
    window.location.href = baseUrl + '/dashboard';
  }

  function loginWithGithub() {
    alert('Login with Github simulation');
    localStorage.setItem('isLoggedIn', 'true');
    localStorage.setItem('userEmail', 'github-user@gmail.com');
    window.location.href = baseUrl + '/dashboard';
  }

  function handleLogin(event) {
    event.preventDefault();

    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    // Validación de credenciales simuladas
    if (email === 'juan@gmail.com' && password === 'juan12345') {
      alert('Login successful! Welcome Juan!');
      // Simular guardado de sesión
      localStorage.setItem('isLoggedIn', 'true');
      localStorage.setItem('userEmail', email);
      // Redirigir al dashboard
      window.location.href = baseUrl + '/dashboard';
    } else {
      alert('Invalid credentials! Please use:\nEmail: juan@gmail.com\nPassword: juan12345');
    }
  }

  function togglePassword() {
    const passwordInput = document.getElementById('password');
    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
    passwordInput.setAttribute('type', type);
  }

  function showRegister() {
    alert('Register functionality would be implemented here');
  }

  // Hacer las funciones globales
  window.loginWithGoogle = loginWithGoogle;
  window.loginWithGithub = loginWithGithub;
  window.handleLogin = handleLogin;
  window.togglePassword = togglePassword;
  window.showRegister = showRegister;
</script>

<style>
  /* Reset body padding for auth page */
  :global(body) {
    padding-top: 0 !important;
    overflow: hidden;
  }

  .auth-main {
    height: 100vh;
    background: var(--bg-general);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.75rem;
    overflow: hidden;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }

  .auth-container {
    width: 100%;
    max-width: 340px;
    height: auto;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .auth-card {
    background: var(--bg-principal);
    border-radius: var(--radius-xl);
    padding: 1.25rem;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    border: 1px solid var(--border-light);
    width: 100%;
    max-height: calc(100vh - 1.5rem);
    overflow: hidden;
    position: relative;
  }

  .auth-header {
    text-align: center;
    margin-bottom: 0.875rem;
  }

  .welcome-text {
    font-size: 0.875rem;
    color: var(--text-secondary);
    font-weight: 400;
    margin: 0 0 0.25rem 0;
  }

  .brand-text {
    font-size: 1.375rem;
    color: var(--color-primary);
    font-weight: 700;
    margin: 0;
  }

  .social-buttons {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin-bottom: 0.875rem;
  }

  .social-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.625rem;
    border: 1px solid var(--border-medium);
    border-radius: var(--radius-lg);
    background: var(--bg-principal);
    color: var(--text-primary);
    font-size: 0.8125rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
  }

  .social-btn:hover {
    background: var(--bg-general);
    border-color: var(--border-dark);
  }

  .google-btn:hover {
    border-color: #4285f4;
  }

  .github-btn:hover {
    border-color: #333;
  }

  .divider {
    display: flex;
    align-items: center;
    margin: 0.875rem 0;
    color: var(--text-light);
    font-size: 0.8125rem;
  }

  .divider::before,
  .divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border-medium);
  }

  .divider span {
    padding: 0 0.75rem;
  }

  .login-form {
    display: flex;
    flex-direction: column;
    gap: 0.625rem;
  }

  .input-group {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
  }

  .input-icon {
    position: absolute;
    left: 0.625rem;
    color: var(--text-light);
    z-index: 1;
  }

  .form-input {
    width: 100%;
    padding: 0.625rem 0.625rem 0.625rem 2.5rem;
    border: 1px solid var(--border-medium);
    border-radius: var(--radius-lg);
    background: var(--bg-general);
    color: var(--text-primary);
    font-size: 0.8125rem;
    outline: none;
    transition: all 0.2s ease;
  }

  .form-input:focus {
    border-color: var(--color-primary);
    background: var(--bg-principal);
    box-shadow: 0 0 0 2px var(--color-primary-light);
  }

  .toggle-password {
    position: absolute;
    right: 0.625rem;
    background: none;
    border: none;
    color: var(--text-light);
    cursor: pointer;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .toggle-password:hover {
    color: var(--text-secondary);
  }

  .form-options {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .checkbox-label {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.8125rem;
    color: var(--text-secondary);
    cursor: pointer;
  }

  .checkbox-label input[type='checkbox'] {
    display: none;
  }

  .checkmark {
    width: 16px;
    height: 16px;
    border: 1px solid var(--border-medium);
    border-radius: var(--radius-sm);
    position: relative;
  }

  .checkbox-label input[type='checkbox']:checked + .checkmark {
    background: var(--color-primary);
    border-color: var(--color-primary);
  }

  .checkbox-label input[type='checkbox']:checked + .checkmark::after {
    content: '✓';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 10px;
  }

  .forgot-link {
    font-size: 0.8125rem;
    color: var(--color-primary);
    text-decoration: none;
  }

  .forgot-link:hover {
    text-decoration: underline;
  }

  .login-btn {
    width: 100%;
    padding: 0.625rem;
    background: var(--color-primary);
    color: white;
    border: none;
    border-radius: var(--radius-lg);
    font-size: 0.8125rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .login-btn:hover {
    background: var(--color-primary-dark);
  }

  .register-link {
    text-align: center;
    margin-top: 0.625rem;
    font-size: 0.8125rem;
    color: var(--text-secondary);
  }

  .register-link a {
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 500;
  }

  .register-link a:hover {
    text-decoration: underline;
  }

  @media (max-width: 768px) {
    .auth-main {
      padding: 0.5rem;
    }

    .auth-card {
      padding: 1rem;
    }

    .welcome-text {
      font-size: 0.75rem;
    }

    .brand-text {
      font-size: 1.25rem;
    }
  }
</style>
